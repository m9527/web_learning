<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">    
    <title>IFE ECMAScript</title>
    <script>
        window.onload = function(){
            var btnEle = document.querySelector('#fade-btn'),
            objEle = document.querySelector('#fade-obj'),
            num = 10,
            //淡入淡出开关
            flag = true,
            fadeText = '',
            insetIn;

    btnEle.onclick = function(){
        fadeCommon();
    };
   var fadeCommon = function(){
        insetIn = setInterval(function(){
            btnEle.disabled = true;

            if(flag){
                num--;
            }else{
                num++;
            }

            objEle.style.opacity = num / 10;

            if(num <= 0 || num >= 10){
                clearInterval(insetIn);
                btnEle.disabled = false;

                if(num){
                    fadeText = (flag = true)? '淡出' : '淡入';
                    btnEle.innerHTML = fadeText;
                }else{
                    fadeText = (flag = false) ? '淡出' : '淡入';
                    btnEle.innerHTML = fadeText;    
                }
            }
        },30)
    };
        }
 
    </script>
 </head>
<body>            
    <div id="fade-obj" style="width:300px;height:300px;background:#000"></div>
    <button id="fade-btn">淡出</button>
</body>
</html>